build:stable:
  image: rust:stretch
  script:
    - RUSTFLAGS="-D warnings" cargo build

build:nightly:
  image: rustlang/rust:nightly
  script:
    - RUSTFLAGS="-D warnings" cargo build

regress:nightly:
  image: rustlang/rust:nightly
  script:
    - RUSTFLAGS="-D warnings" cargo build --release
    - rustup component add rustfmt-preview
    - cd ci/svd2rust-regress
    - rm -rf ./output
    - RUSTFLAGS="-D warnings" cargo run --release -- --long-test --format --verbose
